asyncapi: 2.4.0
info:
  title: Agube service
  version: 0.0.0
  description: Agube service.
  contact:
    name: Availa
    email: agube.developers@gmail.com
servers:
  development:
    url: rabbitmq:5672
    protocol: amqp
    description: RabbitMQ broker.
channels:
  subscription.new-user:
    publish:
      description: 'publish a new user subscription'
      message:
        $ref: '#/components/messages/new-subscription'
    subscribe:
      description: 'execute the subscription and persist in the database'
      message:
        $ref: '#/components/messages/new-subscription'
  agube.new-user:
    publish:
      description: 'publish a new user creation'
      message:
        $ref: '#/components/messages/new-user'
    subscribe:
      description: 'execute the user creation and persist in the database'
      message:
        $ref: '#/components/messages/new-user'
components:
  messages:
    new-subscription:
      name: NewUserSubscription
      title: New user subscription
      summary: New user subscription information
      contentType: application/json
      payload:
        $ref: '#/components/schemas/UserData'
    new-user:
      name: NewUser
      title: New user
      summary: New user information
      contentType: application/json
      payload:
        $ref: '#/components/schemas/UserData'
  schemas:
    UserData:
      type: object
      additionalProperties: false
      properties:
        id:
          type: string
          description: User Id
        full_name:
          type: string
          description: Complete user name
        extra_info:
          type: string
          description: Extra information about the user
        email:
          type: string
          description: User email
        phone_number:
          type: string
          description: User phone number