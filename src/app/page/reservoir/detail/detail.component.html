<div class="detail-page">
    <div class="page-content">
        <mat-card *ngIf="!loading">
            <mat-card-content *ngIf="reservoir">
                <div class="reservoir-info">
                    <h1>
                        {{ reservoir.geolocation | geolocation }}
                        <mat-icon matTooltip="{{ 'PAGE.DWELLING.DETAIL.BUTTON.TITLE.EDIT.TOOLTIP' | translate }}"
                            (click)="goToEditGeolocation()">
                            edit
                        </mat-icon>
                    </h1>
                    <div class="reservoir-content-info">
                        <app-address [geolocation]="reservoir.geolocation"></app-address>
                        <app-reservoir-resume [reservoirId]="reservoir.id"></app-reservoir-resume>
                        <!-- <div class="reservoir-resident">
                            <app-owner [reservoirId]="reservoir.id"></app-owner>
                        </div> -->
                    </div>
                    <div class="content-buttons-map">
                        <app-management [reservoir]="true" [manage]="reservoir" [waterMeterId]="waterMeter?.id"
                            [type]="type" [load]="true">
                        </app-management>
                        <div class="buttons-map">
                            <button mat-raised-button [color]="'primary'" matTooltip="Ver mapa" (click)="seeMap()"
                                matTooltip="{{ 'PAGE.DWELLING.DETAIL.BUTTON.MAP.DIALOG.TOOLTIP' | translate }}">
                                <mat-icon>map</mat-icon>
                                {{ 'PAGE.DWELLING.DETAIL.BUTTON.MAP.DIALOG.TEXT' | translate }}
                            </button>
                        </div>
                    </div>
                    <span *ngIf="waterMeter">
                        <p>{{ 'PAGE.DWELLING.CREATE.CODE_COUNTER' | translate}}</p>
                        <h3>{{waterMeter.code }}</h3>
                        <app-water-meter-detail [reservoirId]="reservoirId" [waterMeterId]="waterMeter.id" [type]="type" [canAddReading]="true">
                        </app-water-meter-detail>
                    </span>
                </div>
                <div class="reservoir-map">
                    <mat-button-toggle-group #group="matButtonToggleGroup">
                        <mat-button-toggle (click)="mode = 'map'"
                            matTooltip="{{ 'PAGE.RESERVOIR.DETAIL.BUTTON.MAP.TOOLTIP' | translate }}"
                            matTooltipPosition="left">
                            <mat-icon>map</mat-icon>
                        </mat-button-toggle>
                        <mat-button-toggle *ngIf="canLoadStreetView" (click)="mode = 'streetView'"
                            matTooltip="{{ 'PAGE.RESERVOIR.DETAIL.BUTTON.STREET_VIEW.TOOLTIP' | translate }}"
                            matTooltipPosition="right">
                            <mat-icon>360</mat-icon>
                        </mat-button-toggle>
                    </mat-button-toggle-group>
                    <div *ngIf="showMap && configureMap">
                        <div *ngIf="mode == 'map'; else showStreetView">
                            <app-map [baseConfiguration]="configureMap"></app-map>
                        </div>
                        <ng-template #showStreetView>
                            <app-street-view [configureView]="configureView"></app-street-view>
                        </ng-template>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>